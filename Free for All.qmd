---
title: "Free for All"
format: html
---

```{r}

library(leaflet)
library(raster)
library(png)

img_width <- 3800
img_height <- 2400

# Load and flip image array
img_array <- readPNG("media/gallery.png")
img_array_flipped <- img_array[dim(img_array)[1]:1,,]

# Create raster brick and set extent
img_raster <- brick(img_array_flipped[,,1:3])
extent(img_raster) <- extent(0, img_width, 0, img_height)

# âž• Add dummy CRS
crs(img_raster) <- NA

# Create leaflet map
leaflet(options = leafletOptions(
  crs = leafletCRS(crsClass = "L.CRS.Simple"),
  minZoom = -1,
  maxZoom = 2
)) |>
  setView(lng = img_width / 2, lat = img_height / 2, zoom = 0) |>
  fitBounds(0, 0, img_width, img_height) |>
  addRasterImage(img_raster, opacity = 1) |>
  addRectangles(
    lng1 = 2731, 
    lat1 = 937,
    lng2 = 3134, 
    lat2 = 1792,
    fillColor = "transparent",
    color = "red",
    weight = 2,
    popup = "<img src='media/ENVS_40_Zine_1.png' width='250px'>"
  )

```

```{r}
img_width <- 3800
img_height <- 2400

# Load and prepare the museum wall image (PNG)
img_path <- "media/gallery.png"  # your base image file path
img_array <- readPNG(img_path)
img_array_flipped <- img_array[dim(img_array)[1]:1,,]   # flip vertically

img_raster <- brick(img_array_flipped[,,1:3])
extent(img_raster) <- extent(0, img_width, 0, img_height)


```
